<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4-4.1.1/jq-3.3.1/dt-1.10.18/datatables.min.css"/>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs4-4.1.1/jq-3.3.1/dt-1.10.18/datatables.min.js"></script>
  <title>TGLinter</title>
  <script type="text/javascript">

    $(function() {
      var mainTable = $("#mainTable").DataTable({});
      $.ajax({
        type: "GET",
        url: "/graphql?query=query AllContent { credibleContents(scrape_status: \"finished\") { id, title, publication } } ",
        success: function(response) {
          for(var x in response.data.credibleContents) {
            var item = response.data.credibleContents[x];
            var row = [
              "<a href='view.html?id=" + item.id + "''>" + item.title + "</a>",
              item.publication
            ];
            mainTable.row.add(row).draw(false);
          }
        }
      });
    });

  </script>
</head>
<body>
  <table id="mainTable" style="width:100%">
    <thead>
      <tr>
        <th style="width: 100%">Title</th>
        <th>Publication</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</body>
</html>
